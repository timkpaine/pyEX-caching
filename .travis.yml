language: python
cache: pip

python:
  - "3.6"

install:
    - pip install -r requirements.txt
    - pip install -U --target=`pwd` --no-deps pyEX  # install latest pyEX base
    - git checkout pyEX/caching  # the above install clobbers source, so restore
    - pip install -U pytest pytest-cov flake8 pylint codecov

script: make test

after_success:
    - codecov --token f83b766b-652a-4ddc-858a-a94390c19046

branches:
  only:
  - master

notifications:
  email: false
